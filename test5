--// ðŸŒ¸ blâˆž3m script library - Main Hub
if game.CoreGui:FindFirstChild("BloomScriptHub") then
	game.CoreGui.BloomScriptHub:Destroy()
end

local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

--------------------------------------------------------
-- MAIN HUB GUI
--------------------------------------------------------
local HubGui = Instance.new("ScreenGui")
HubGui.Name = "BloomScriptHub"
HubGui.IgnoreGuiInset = false
HubGui.ResetOnSpawn = false
HubGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
HubGui.Parent = CoreGui

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 320, 0, 280)
MainFrame.Position = UDim2.new(0.5, -160, 0.5, -140)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
MainFrame.BorderSizePixel = 0
MainFrame.ZIndex = 100
MainFrame.Active = true
MainFrame.Parent = HubGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Thickness = 3
MainStroke.Color = Color3.fromRGB(120, 120, 140)
MainStroke.Parent = MainFrame

-- Header Bar
local HeaderBar = Instance.new("Frame")
HeaderBar.Size = UDim2.new(1, 0, 0, 60)
HeaderBar.Position = UDim2.new(0, 0, 0, 0)
HeaderBar.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
HeaderBar.BorderSizePixel = 0
HeaderBar.ZIndex = 101
HeaderBar.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = HeaderBar

-- Fix header corner (only top corners rounded)
local HeaderFix = Instance.new("Frame")
HeaderFix.Size = UDim2.new(1, 0, 0, 20)
HeaderFix.Position = UDim2.new(0, 0, 1, -20)
HeaderFix.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
HeaderFix.BorderSizePixel = 0
HeaderFix.ZIndex = 101
HeaderFix.Parent = HeaderBar

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0, 300, 1, 0)
Title.Position = UDim2.new(0, 20, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "blâˆž3m script library"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(220, 220, 230)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.ZIndex = 102
Title.Parent = HeaderBar

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 40, 0, 40)
MinimizeButton.Position = UDim2.new(1, -100, 0.5, -20)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 120)
MinimizeButton.Text = "-"
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 24
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.ZIndex = 102
MinimizeButton.Parent = HeaderBar

local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 8)
MinimizeCorner.Parent = MinimizeButton

local isMinimized = false

MinimizeButton.MouseButton1Click:Connect(function()
	if not isMinimized then
		-- Minimize: shrink to just header bar
		TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
			Size = UDim2.new(0, 320, 0, 60)
		}):Play()
		ScriptsContainer.Visible = false
		MinimizeButton.Text = "+"
		isMinimized = true
	else
		-- Expand back
		TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
			Size = UDim2.new(0, 320, 0, 280)
		}):Play()
		wait(0.3)
		ScriptsContainer.Visible = true
		MinimizeButton.Text = "-"
		isMinimized = false
	end
end)

-- Hover effect for minimize button
MinimizeButton.MouseEnter:Connect(function()
	TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {
		BackgroundColor3 = Color3.fromRGB(120, 120, 140)
	}):Play()
end)

MinimizeButton.MouseLeave:Connect(function()
	TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {
		BackgroundColor3 = Color3.fromRGB(100, 100, 120)
	}):Play()
end)

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 40, 0, 40)
CloseButton.Position = UDim2.new(1, -50, 0.5, -20)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
CloseButton.Text = "X"
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BorderSizePixel = 0
CloseButton.ZIndex = 102
CloseButton.Parent = HeaderBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

CloseButton.MouseButton1Click:Connect(function()
	HubGui:Destroy()
end)

-- Hover effect for close button
CloseButton.MouseEnter:Connect(function()
	TweenService:Create(CloseButton, TweenInfo.new(0.2), {
		BackgroundColor3 = Color3.fromRGB(230, 80, 80)
	}):Play()
end)

CloseButton.MouseLeave:Connect(function()
	TweenService:Create(CloseButton, TweenInfo.new(0.2), {
		BackgroundColor3 = Color3.fromRGB(200, 60, 60)
	}):Play()
end)

-- Scripts Container
local ScriptsContainer = Instance.new("ScrollingFrame")
ScriptsContainer.Size = UDim2.new(1, -30, 1, -90)
ScriptsContainer.Position = UDim2.new(0, 15, 0, 75)
ScriptsContainer.BackgroundTransparency = 1
ScriptsContainer.BorderSizePixel = 0
ScriptsContainer.ScrollBarThickness = 6
ScriptsContainer.ScrollBarImageColor3 = Color3.fromRGB(120, 120, 140)
ScriptsContainer.ZIndex = 101
ScriptsContainer.Parent = MainFrame

local ContainerLayout = Instance.new("UIListLayout")
ContainerLayout.SortOrder = Enum.SortOrder.LayoutOrder
ContainerLayout.Padding = UDim.new(0, 12)
ContainerLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ContainerLayout.Parent = ScriptsContainer

-- =====================================================
-- SCRIPT BUTTONS DATA
-- =====================================================
local scripts = {
	{
		name = "Dupe Script",
		description = "Duplicates items in your inventory",
		url = "https://raw.githubusercontent.com/NoLag-IDP/testetfb122/refs/heads/main/test2",
		color = Color3.fromRGB(80, 200, 120)
	},
	{
		name = "Trade Scam Script",
		description = "Advanced trading automation tool",
		url = "https://raw.githubusercontent.com/NoLag-IDP/etfbtest/refs/heads/main/test9",
		color = Color3.fromRGB(200, 100, 200)
	}
}

-- =====================================================
-- CREATE SCRIPT BUTTONS
-- =====================================================
local function createScriptButton(scriptData, index)
	local ButtonFrame = Instance.new("Frame")
	ButtonFrame.Size = UDim2.new(0.95, 0, 0, 50)
	ButtonFrame.Position = UDim2.new(0.5, 0, 0, 0)
	ButtonFrame.AnchorPoint = Vector2.new(0.5, 0)
	ButtonFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 42)
	ButtonFrame.BorderSizePixel = 0
	ButtonFrame.ZIndex = 101
	ButtonFrame.LayoutOrder = index
	ButtonFrame.Parent = ScriptsContainer
	
	local ButtonCorner = Instance.new("UICorner")
	ButtonCorner.CornerRadius = UDim.new(0, 10)
	ButtonCorner.Parent = ButtonFrame
	
	local ButtonStroke = Instance.new("UIStroke")
	ButtonStroke.Thickness = 2
	ButtonStroke.Color = Color3.fromRGB(60, 60, 70)
	ButtonStroke.Parent = ButtonFrame
	
	-- Color Indicator
	local ColorBar = Instance.new("Frame")
	ColorBar.Size = UDim2.new(0, 6, 1, 0)
	ColorBar.Position = UDim2.new(0, 0, 0, 0)
	ColorBar.BackgroundColor3 = scriptData.color
	ColorBar.BorderSizePixel = 0
	ColorBar.ZIndex = 102
	ColorBar.Parent = ButtonFrame
	
	local ColorCorner = Instance.new("UICorner")
	ColorCorner.CornerRadius = UDim.new(0, 10)
	ColorCorner.Parent = ColorBar
	
	-- Script Name
	local ScriptName = Instance.new("TextLabel")
	ScriptName.Size = UDim2.new(1, -100, 1, 0)
	ScriptName.Position = UDim2.new(0, 20, 0, 0)
	ScriptName.BackgroundTransparency = 1
	ScriptName.Text = scriptData.name
	ScriptName.Font = Enum.Font.GothamBold
	ScriptName.TextSize = 16
	ScriptName.TextColor3 = Color3.fromRGB(220, 220, 230)
	ScriptName.TextXAlignment = Enum.TextXAlignment.Left
	ScriptName.TextYAlignment = Enum.TextYAlignment.Center
	ScriptName.ZIndex = 102
	ScriptName.Parent = ButtonFrame
	
	-- Execute Button
	local ExecuteBtn = Instance.new("TextButton")
	ExecuteBtn.Size = UDim2.new(0, 90, 0, 35)
	ExecuteBtn.Position = UDim2.new(1, -100, 0.5, -17.5)
	ExecuteBtn.BackgroundColor3 = scriptData.color
	ExecuteBtn.Text = "Execute"
	ExecuteBtn.Font = Enum.Font.GothamBold
	ExecuteBtn.TextSize = 14
	ExecuteBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	ExecuteBtn.BorderSizePixel = 0
	ExecuteBtn.ZIndex = 102
	ExecuteBtn.Parent = ButtonFrame
	
	local ExecCorner = Instance.new("UICorner")
	ExecCorner.CornerRadius = UDim.new(0, 8)
	ExecCorner.Parent = ExecuteBtn
	
	-- Button Click Handler
	ExecuteBtn.MouseButton1Click:Connect(function()
		ExecuteBtn.Text = "..."
		
		local success, err = pcall(function()
			loadstring(game:HttpGet(scriptData.url))()
		end)
		
		if success then
			ExecuteBtn.Text = "Executed"
			
			-- Flash effect
			TweenService:Create(ButtonFrame, TweenInfo.new(0.3), {
				BackgroundColor3 = Color3.fromRGB(50, 80, 50)
			}):Play()
			wait(0.3)
			TweenService:Create(ButtonFrame, TweenInfo.new(0.3), {
				BackgroundColor3 = Color3.fromRGB(35, 35, 42)
			}):Play()
			
			wait(1)
			ExecuteBtn.Text = "Execute"
		else
			ExecuteBtn.Text = "Failed"
			
			warn("Script execution failed:", err)
			
			wait(2)
			ExecuteBtn.Text = "Execute"
		end
	end)
	
	-- Hover effects
	ExecuteBtn.MouseEnter:Connect(function()
		TweenService:Create(ExecuteBtn, TweenInfo.new(0.2), {
			Size = UDim2.new(0, 95, 0, 38)
		}):Play()
	end)
	
	ExecuteBtn.MouseLeave:Connect(function()
		TweenService:Create(ExecuteBtn, TweenInfo.new(0.2), {
			Size = UDim2.new(0, 90, 0, 35)
		}):Play()
	end)
end

-- Generate all script buttons
for i, scriptData in ipairs(scripts) do
	createScriptButton(scriptData, i)
end

-- Update ScrollingFrame canvas size
ScriptsContainer.CanvasSize = UDim2.new(0, 0, 0, (#scripts * 50) + ((#scripts - 1) * 12) + 10)

-- =====================================================
-- DRAGGING SYSTEM (MOBILE & PC SUPPORT)
-- =====================================================
local dragging = false
local dragInput = nil
local dragStart = nil
local startPos = nil

local function updateDrag(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)
end

HeaderBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or 
	   input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

HeaderBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or 
	   input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		updateDrag(input)
	end
end)

print("ðŸŒ¸ blâˆž3m script library loaded successfully!")
